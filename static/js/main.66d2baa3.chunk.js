(this["webpackJsonpmobitopp-visualizer"]=this["webpackJsonpmobitopp-visualizer"]||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),s=n(9),o=n.n(s),r=(n(18),n(12)),l=n(2),c=n.n(l),d=n(10),p=n(3),u=n(4),h=n(7),m=n(6),f=n(5),y=n(0),v=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).onScriptLoad=e.onScriptLoad.bind(Object(f.a)(e)),e}return Object(u.a)(n,[{key:"onScriptLoad",value:function(){var e=new window.google.maps.Map(document.getElementById(this.props.id),this.props.options);this.props.onMapLoad(e)}},{key:"componentDidMount",value:function(){var e=this;if(window.google)this.onScriptLoad();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyDDsnot3ZEyq6U-JrZXeWvrW8JSUKjkIhM";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),t.addEventListener("load",(function(t){e.onScriptLoad()}))}}},{key:"render",value:function(){return Object(y.jsx)("div",{style:{width:"100%",height:400},id:this.props.id})}}]),n}(i.Component),g=(n(21),n(11)),j=n.n(g),b=n(13),O=n.n(b),x={"-2":"Undefined","-1":"Unknown",0:"Bike",1:"Car",2:"Passenger",3:"Pedestrian",4:"Public transport",5:"Truck",6:"Park and ride",7:"Taxi",11:"Car sharing (station-based)",12:"Car sharing (free-floating)",15:"E-Scooter",16:"Pedelec",17:"Bike sharing",21:"Ride pooling",22:"Ride hailing",23:"Premium ride hailing"};var I=[{id:"Mo.",name:"Monday"},{id:"Di.",name:"Tuesday"},{id:"Mi.",name:"Wednesday"},{id:"Do.",name:"Thursday"},{id:"Fr.",name:"Friday"},{id:"Sa.",name:"Saturday"},{id:"So.",name:"Sunday"}];var T=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={selectedDayIndex:0,selectedTripIndex:0,allTrips:[],selectedTrips:[],selectedPolylines:[]},e}return Object(u.a)(n,[{key:"onFileLoaded",value:function(e,t,n){var i=e[0],a=[];e.slice(1).forEach((function(e,t){var n={};i.forEach((function(t,i){n[t]=e[i]})),n.distanceInKm=function(e,t){var n=e.lat*Math.PI/180,i=t.lat*Math.PI/180,a=(t.lat-e.lat)*Math.PI/180,s=(t.long-e.long)*Math.PI/180,o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n)*Math.cos(i)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371e3}({lat:n.fromY,long:n.fromX},{lat:n.toY,long:n.toX})/1e3,n.avgSpeedInKph=n.distanceInKm/n.durationTrip*60,a.push(n)})),console.log(a),this.setState({allTrips:a}),this.filterTrips()}},{key:"selectDay",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({selectedDayIndex:t});case 2:this.filterTrips();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectTrip",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.selectedPolylines[this.state.selectedTripIndex].setOptions(this.normalPolyline_options),this.state.selectedPolylines[t].setOptions(this.focussedPolyline_options),e.next=4,this.setState({selectedTripIndex:t});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterTrips",value:function(e){var t=this,n=I[this.state.selectedDayIndex].id,i=[],a=[];this.state.allTrips.forEach((function(e,s){if(e.tripBeginDay==n){i.push(e);var o=[{lat:parseFloat(e.fromY),lng:parseFloat(e.fromX)},{lat:parseFloat(e.toY),lng:parseFloat(e.toX)}],l=new window.google.maps.Polyline(Object(r.a)(Object(r.a)({},0==a.length?t.focussedPolyline_options:t.normalPolyline_options),{},{path:o}));l.setMap(t.map),a.push(l)}})),this.deleteAllPolylines(),this.setState({selectedTrips:i,selectedPolylines:a,selectedTripIndex:0})}},{key:"deleteAllPolylines",value:function(){this.state.selectedPolylines.forEach((function(e,t){e.setMap(null)}))}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsxs)("div",{className:"ListContainer",children:[Object(y.jsx)("div",{className:"DropzoneContainer",children:Object(y.jsx)(O.a,{cssClass:"csv-reader-input",label:"Select the output file from mobitopp for one person here (file format: .csv).",onFileLoaded:this.onFileLoaded.bind(this),onError:function(){},inputId:"CSV File",inputName:"CSV File",inputStyle:{color:"red"}})}),Object(y.jsx)("ol",{className:"List",children:I.map((function(t,n){return Object(y.jsx)("li",{onClick:function(){return e.selectDay(n)},className:j()({ListItem:!0,SelectedListItem:n===e.state.selectedDayIndex}),children:Object(y.jsxs)("div",{className:"ListItemTitle",children:[" ",t.name," "]})},t.id)}))}),Object(y.jsx)("ol",{className:"List",children:this.state.selectedTrips.map((function(t,n){return Object(y.jsxs)("li",{onClick:function(){return e.selectTrip(n)},className:j()({ListItem:!0,SelectedListItem:n===e.state.selectedTripIndex}),children:[Object(y.jsxs)("div",{className:"ListItemTitle",children:[" ","Trip "+t.tripId," "]}),(i=t,[i.tripBeginDay+", "+i.tripBeginTime+" - "+i.tripEndDay+", "+i.tripEndTime,parseFloat(i.durationTrip).toFixed(2)+" min \u2013 "+parseFloat(i.distanceInKm).toFixed(2)+" km \u2013 "+parseFloat(i.avgSpeedInKph).toFixed(2)+" km/h",x[i.tripMode]]).map((function(e,t){return Object(y.jsxs)("div",{children:[" ",e," "]})}))]},t.tripId);var i}))})]}),Object(y.jsx)(v,{id:"myMap",options:{center:{lat:48.8591174,lng:8.2059096},zoom:9},onMapLoad:function(t){e.map=t,e.normalPolyline_options={geodesic:!0,strokeColor:"#000000",strokeOpacity:.4,strokeWeight:2,icons:[]},e.focussedPolyline_options={geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2,icons:[{icon:{path:window.google.maps.SymbolPath.FORWARD_CLOSED_ARROW},offset:"100%"}]},e.filterTrips()}})]})}}]),n}(a.a.Component),k=T,S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),s(e),o(e)}))};o.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(k,{})}),document.getElementById("root")),S()}},[[25,1,2]]]);
//# sourceMappingURL=main.66d2baa3.chunk.js.map